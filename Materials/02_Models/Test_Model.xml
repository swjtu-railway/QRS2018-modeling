<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
	<declaration>// Place global declarations here.
//Internal Observe channel
chan A_AuxObserv,B_AuxObserv;

chan ACBI_DepartReq,BCBI_DepartReq;

chan AAllow,BAllow;
chan AFailed,BFailed;

chan A_FJTimeOut,B_FJTimeOut;
chan A_FJUp,B_FJUp;
chan A_FJDown,B_FJDown;

bool A_FJStatus=false,B_FJStatus=true;
bool A_ChgDirReq=false,B_ChgDirReq=false;

bool A_AuxDepart=false,B_AuxDepart=false;
bool A_AuxRecv=false,B_AuxRecv=false;

bool A_AuxHdlReq,B_AuxHdlReq;
bool A_AuxChgDirReq,B_AuxChgDirReq;
bool A_AuxRecvReq,B_AuxRecvReq;

urgent chan ctrl1,ctrl2,ctrl3,ctrl4,ctrl5,ctrl6;

urgent chan Reset;
urgent chan Reset1;
urgent chan Reset2;
urgent chan Reset3;
urgent chan Reset4;
urgent chan Reset5;
urgent chan Reset6;
urgent chan Reset7;

int[0,2] ASucc=2;
int[0,2] BSucc=2;
clock AFJClk;
clock BFJClk;

int TA0 = 13;    //Time for AFJ to acts
int TB0 = 13;    //Time for BFJ to acts
int [0,3]    ACmd = 2;
int [0,3]    BCmd = 2;
bool    ALockCon = false;
bool    BLockCon = false;
bool    ACBI_Lock=false;
bool    ASec_Clr=true;
bool    BCBI_Lock=false;
bool    BSec_Clr=true;

bool    A_JQJStatus=false;
bool    B_JQJStatus=false;
int [0,2]    AAllow_CBI=2;
int [0,2]    BAllow_CBI=2;
int [0,1]    BFJDrive=1;
int [0,1]    AFJDrive=0;
</declaration>
	<template>
		<name x="5" y="5">ACBI</name>
		<declaration>// Place local declarations here.
</declaration>
		<location id="id0" x="-34" y="102">
			<name x="-59" y="119">AuxHandle</name>
		</location>
		<location id="id1" x="-204" y="-102">
			<name x="-195" y="-136">RouteUnLock</name>
		</location>
		<location id="id2" x="-34" y="-204">
			<name x="-17" y="-221">SigOpen</name>
		</location>
		<location id="id3" x="136" y="-102">
			<name x="51" y="-136">RouteLock</name>
		</location>
		<location id="id4" x="-34" y="0">
			<name x="-42" y="-34">idle</name>
		</location>
		<init ref="id4"/>
		<transition>
			<source ref="id0"/>
			<target ref="id4"/>
			<label kind="guard" x="-195" y="34">!A_AuxHdlReq</label>
			<label kind="assignment" x="-195" y="59">B_AuxRecv:=0,
B_AuxRecvReq:=0</label>
			<nail x="-204" y="102"/>
			<nail x="-204" y="34"/>
		</transition>
		<transition>
			<source ref="id4"/>
			<target ref="id0"/>
			<label kind="guard" x="42" y="0">!A_JQJStatus&amp;&amp;A_AuxDepart</label>
			<label kind="synchronisation" x="136" y="17">A_AuxObserv!</label>
			<label kind="assignment" x="8" y="25">A_AuxDepart:=0,
A_AuxHdlReq:=1,
B_AuxRecv:=1,
B_AuxRecvReq:=1</label>
			<nail x="136" y="34"/>
			<nail x="136" y="102"/>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id4"/>
			<label kind="assignment" x="-238" y="-34">ASucc:=2,
AAllow_CBI:=2</label>
			<nail x="-204" y="-34"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id3"/>
			<target ref="id3"/>
			<label kind="guard" x="144" y="-170">AAllow_CBI==0</label>
			<label kind="assignment" x="153" y="-153">ASucc:=0</label>
			<nail x="170" y="-136"/>
			<nail x="204" y="-136"/>
			<nail x="204" y="-68"/>
			<nail x="170" y="-68"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id3"/>
			<target ref="id1"/>
			<label kind="guard" x="-119" y="-119">ACmd==2&amp;&amp;!ALockCon</label>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id1"/>
			<label kind="guard" x="-204" y="-221">!ALockCon</label>
			<label kind="assignment" x="-195" y="-204">ACBI_Lock:=0</label>
			<nail x="-204" y="-204"/>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id2"/>
			<label kind="guard" x="51" y="-221">AAllow_CBI==1</label>
			<label kind="assignment" x="59" y="-204">ACBI_Lock=true,
ASucc:=1</label>
			<nail x="136" y="-204"/>
		</transition>
		<transition>
			<source ref="id4"/>
			<target ref="id3"/>
			<label kind="guard" x="-17" y="-51">ACmd==1&amp;&amp;ALockCon</label>
			<label kind="synchronisation" x="76" y="-25">ACBI_DepartReq!</label>
			<nail x="136" y="-34"/>
		</transition>
	</template>
	<template>
		<name>BCBI</name>
		<location id="id5" x="-714" y="34">
			<name x="-748" y="42">AuxHandle</name>
		</location>
		<location id="id6" x="-884" y="-170">
			<name x="-867" y="-195">RouteUnlock</name>
		</location>
		<location id="id7" x="-714" y="-272">
			<name x="-739" y="-255">SigOpen</name>
		</location>
		<location id="id8" x="-544" y="-170">
			<name x="-518" y="-187">RouteLock</name>
		</location>
		<location id="id9" x="-714" y="-68">
			<name x="-748" y="-102">idle</name>
		</location>
		<init ref="id9"/>
		<transition>
			<source ref="id5"/>
			<target ref="id9"/>
			<label kind="guard" x="-646" y="8">!B_AuxHdlReq</label>
			<label kind="assignment" x="-646" y="34">A_AuxRecv:=0,
A_AuxRecvReq:=0</label>
			<nail x="-544" y="34"/>
			<nail x="-544" y="-34"/>
		</transition>
		<transition>
			<source ref="id9"/>
			<target ref="id5"/>
			<label kind="guard" x="-841" y="-42">!B_JQJStatus&amp;&amp;B_AuxDepart</label>
			<label kind="synchronisation" x="-866" y="-68">B_AuxObserv!</label>
			<label kind="assignment" x="-875" y="-25">B_AuxDepart:=0,
B_AuxHdlReq:=1,
A_AuxRecv:=1,
A_AuxRecvReq:=1</label>
			<nail x="-884" y="-34"/>
			<nail x="-884" y="34"/>
		</transition>
		<transition>
			<source ref="id6"/>
			<target ref="id9"/>
			<label kind="assignment" x="-867" y="-144">BAllow_CBI:=2,
BSucc:=2</label>
			<nail x="-884" y="-102"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id8"/>
			<target ref="id8"/>
			<label kind="guard" x="-433" y="-195">BAllow_CBI==0</label>
			<label kind="assignment" x="-433" y="-178">BSucc:=0</label>
			<nail x="-501" y="-229"/>
			<nail x="-442" y="-229"/>
			<nail x="-442" y="-136"/>
			<nail x="-501" y="-136"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id8"/>
			<target ref="id6"/>
			<label kind="guard" x="-782" y="-195">BCmd==2&amp;&amp;BLockCon==false</label>
		</transition>
		<transition>
			<source ref="id7"/>
			<target ref="id6"/>
			<label kind="guard" x="-909" y="-306">!BLockCon</label>
			<label kind="assignment" x="-909" y="-289">BCBI_Lock:=false</label>
			<nail x="-884" y="-272"/>
		</transition>
		<transition>
			<source ref="id8"/>
			<target ref="id7"/>
			<label kind="guard" x="-535" y="-272">BAllow_CBI==1</label>
			<label kind="assignment" x="-612" y="-314">BCBI_Lock:=true,
BSucc:=1</label>
			<nail x="-544" y="-272"/>
		</transition>
		<transition>
			<source ref="id9"/>
			<target ref="id8"/>
			<label kind="guard" x="-671" y="-76">BCmd==1&amp;&amp;BLockCon==true</label>
			<label kind="synchronisation" x="-612" y="-93">BCBI_DepartReq!</label>
			<nail x="-544" y="-102"/>
		</transition>
	</template>
	<template>
		<name>M_EVS</name>
		<declaration>//该模型用于定时改变联锁条件、改方条件、时钟条件等，便于模型的持续运行</declaration>
		<location id="id10" x="-1258" y="-493">
		</location>
		<location id="id11" x="-1326" y="-374">
			<name x="-1300" y="-391">AFJFailed</name>
		</location>
		<location id="id12" x="-1326" y="-263">
		</location>
		<location id="id13" x="-1785" y="-476">
		</location>
		<location id="id14" x="-1377" y="-136">
			<name x="-1394" y="-170">BFJFailed</name>
		</location>
		<location id="id15" x="-1530" y="-136">
		</location>
		<location id="id16" x="-1734" y="-136">
			<name x="-1717" y="-136">BJQJDown</name>
		</location>
		<location id="id17" x="-1759" y="-263">
		</location>
		<location id="id18" x="-1683" y="-348">
		</location>
		<location id="id19" x="-1572" y="-136">
		</location>
		<location id="id20" x="-1564" y="-535">
		</location>
		<location id="id21" x="-1496" y="-535">
			<name x="-1506" y="-569">EVS_FUY</name>
		</location>
		<location id="id22" x="-1360" y="-527">
			<name x="-1385" y="-561">AChange</name>
		</location>
		<location id="id23" x="-1640" y="-221">
		</location>
		<location id="id24" x="-1759" y="-374">
			<name x="-1793" y="-408">AJQJDown</name>
		</location>
		<location id="id25" x="-1691" y="-535">
			<name x="-1742" y="-569">BChange</name>
		</location>
		<location id="id26" x="-1547" y="-306">
			<name x="-1547" y="-289">idle</name>
		</location>
		<init ref="id26"/>
		<transition color="#ff0000">
			<source ref="id25"/>
			<target ref="id13"/>
			<label kind="synchronisation" x="-1768" y="-544">Reset6?</label>
			<label kind="assignment" x="-1827" y="-527">BLockCon:=false</label>
		</transition>
		<transition>
			<source ref="id22"/>
			<target ref="id10"/>
			<label kind="synchronisation" x="-1326" y="-535">Reset7?</label>
			<label kind="assignment" x="-1309" y="-527">ALockCon:=false</label>
		</transition>
		<transition>
			<source ref="id10"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1300" y="-476">ACmd:=2</label>
		</transition>
		<transition>
			<source ref="id11"/>
			<target ref="id26"/>
			<label kind="synchronisation" x="-1453" y="-340">Reset7?</label>
			<label kind="assignment" x="-1411" y="-357">BSec_Clr:=1</label>
		</transition>
		<transition>
			<source ref="id12"/>
			<target ref="id11"/>
			<label kind="guard" x="-1317" y="-340">!A_JQJStatus&amp;&amp;
!B_JQJStatus</label>
			<label kind="assignment" x="-1317" y="-357">B_AuxDepart:=1</label>
		</transition>
		<transition>
			<source ref="id26"/>
			<target ref="id12"/>
			<label kind="synchronisation" x="-1504" y="-314">ctrl6?</label>
			<label kind="assignment" x="-1487" y="-280">BSec_Clr:=0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id13"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1751" y="-459">BCmd:=2</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id14"/>
			<target ref="id26"/>
			<label kind="synchronisation" x="-1428" y="-212">Reset6?</label>
			<label kind="assignment" x="-1445" y="-229">ASec_Clr:=1</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id15"/>
			<target ref="id14"/>
			<label kind="guard" x="-1513" y="-119">!A_JQJStatus&amp;&amp;
!B_JQJStatus</label>
			<label kind="assignment" x="-1513" y="-136">A_AuxDepart:=1</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id26"/>
			<target ref="id15"/>
			<label kind="synchronisation" x="-1530" y="-212">ctrl5?</label>
			<label kind="assignment" x="-1530" y="-187">ASec_Clr:=0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id16"/>
			<target ref="id19"/>
			<label kind="synchronisation" x="-1666" y="-153">Reset3?</label>
			<label kind="assignment" x="-1691" y="-170">ALockCon:=false</label>
		</transition>
		<transition>
			<source ref="id17"/>
			<target ref="id24"/>
			<label kind="guard" x="-1759" y="-331">A_JQJStatus==false</label>
			<label kind="assignment" x="-1759" y="-314">ALockCon:=true,
ACmd:=1</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id19"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1632" y="-212">ACmd:=2,
ACBI_Lock:=false</label>
		</transition>
		<transition>
			<source ref="id18"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1657" y="-365">ACmd:=2,
BCBI_Lock:=false</label>
		</transition>
		<transition>
			<source ref="id20"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1623" y="-501">BCmd:=0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id21"/>
			<target ref="id26"/>
			<label kind="assignment" x="-1504" y="-501">ACmd:=0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id22"/>
			<target ref="id21"/>
			<label kind="synchronisation" x="-1453" y="-552">Reset4?</label>
			<label kind="assignment" x="-1487" y="-527">ALockCon:=false</label>
		</transition>
		<transition>
			<source ref="id26"/>
			<target ref="id22"/>
			<label kind="synchronisation" x="-1436" y="-484">ctrl1?</label>
			<label kind="assignment" x="-1470" y="-467">ACmd:=1,
ALockCon:=true</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id23"/>
			<target ref="id16"/>
			<label kind="guard" x="-1751" y="-221">B_JQJStatus==false</label>
			<label kind="assignment" x="-1759" y="-204">ALockCon:=true,
ACmd:=1</label>
		</transition>
		<transition>
			<source ref="id24"/>
			<target ref="id18"/>
			<label kind="synchronisation" x="-1725" y="-374">Reset2?</label>
			<label kind="assignment" x="-1734" y="-391">ALockCon:=false</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id26"/>
			<target ref="id23"/>
			<label kind="synchronisation" x="-1623" y="-272">ctrl4?</label>
			<label kind="assignment" x="-1683" y="-263">ACBI_Lock:=true</label>
		</transition>
		<transition>
			<source ref="id26"/>
			<target ref="id17"/>
			<label kind="synchronisation" x="-1640" y="-306">ctrl3?</label>
			<label kind="assignment" x="-1674" y="-289">BCBI_Lock:=true</label>
		</transition>
		<transition>
			<source ref="id25"/>
			<target ref="id20"/>
			<label kind="synchronisation" x="-1649" y="-535">Reset5?</label>
			<label kind="assignment" x="-1683" y="-561">BLockCon:=false</label>
		</transition>
		<transition>
			<source ref="id26"/>
			<target ref="id25"/>
			<label kind="synchronisation" x="-1700" y="-493">ctrl2?</label>
			<label kind="assignment" x="-1674" y="-476">BCmd:=1,
BLockCon:=true</label>
		</transition>
	</template>
	<template>
		<name>M_CTC</name>
		<declaration>//用于模型之间的时钟同步</declaration>
		<location id="id27" x="-1334" y="-671">
			<name x="-1429" y="-680">AuxTimeOut</name>
		</location>
		<location id="id28" x="-603" y="-569">
			<name x="-586" y="-595">ATimeOutFUY</name>
		</location>
		<location id="id29" x="-918" y="-493">
		</location>
		<location id="id30" x="-918" y="-348">
		</location>
		<location id="id31" x="-697" y="-671">
			<name x="-756" y="-679">FUY7</name>
		</location>
		<location id="id32" x="-1122" y="-748">
			<name x="-1207" y="-756">AAuxSucc</name>
		</location>
		<location id="id33" x="-697" y="-748">
		</location>
		<location id="id34" x="-1122" y="-671">
		</location>
		<location id="id35" x="-1003" y="-748">
			<name x="-1003" y="-731">BAuxChange</name>
		</location>
		<location id="id36" x="-1122" y="-603">
			<name x="-1105" y="-612">AAuxChange</name>
		</location>
		<location id="id37" x="-1122" y="-416">
			<name x="-1105" y="-425">FUY5</name>
		</location>
		<location id="id38" x="-1122" y="-348">
			<name x="-1105" y="-348">BChange2</name>
		</location>
		<location id="id39" x="-1122" y="-280">
			<name x="-1105" y="-289">FUY</name>
		</location>
		<location id="id40" x="-1122" y="-204">
			<name x="-1113" y="-195">AChange</name>
		</location>
		<location id="id41" x="-697" y="-416">
			<name x="-748" y="-433">FUY4</name>
		</location>
		<location id="id42" x="-1122" y="-127">
			<name x="-1130" y="-110">FUY3</name>
		</location>
		<location id="id43" x="-697" y="-127">
			<name x="-748" y="-153">FUY2</name>
		</location>
		<location id="id44" x="-697" y="-272">
			<name x="-748" y="-281">FUY1</name>
		</location>
		<location id="id45" x="-926" y="-204">
			<name x="-943" y="-195">Start</name>
		</location>
		<location id="id46" x="-1003" y="-127">
			<name x="-1020" y="-153">BJQJDown</name>
		</location>
		<location id="id47" x="-697" y="-204">
			<name x="-782" y="-213">AJQJDown</name>
		</location>
		<location id="id48" x="-697" y="-348">
			<name x="-773" y="-357">BChange</name>
		</location>
		<location id="id49" x="-697" y="-493">
			<name x="-773" y="-510">AChange2</name>
		</location>
		<init ref="id45"/>
		<transition color="#ff0000">
			<source ref="id33"/>
			<target ref="id32"/>
			<label kind="guard" x="-1113" y="-833">!B_FJStatus&amp;&amp;
!A_AuxRecv</label>
			<label kind="synchronisation" x="-1011" y="-816">Reset7!</label>
			<nail x="-646" y="-748"/>
			<nail x="-646" y="-790"/>
			<nail x="-1122" y="-790"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id27"/>
			<target ref="id36"/>
			<label kind="guard" x="-1317" y="-637">A_JQJStatus&amp;&amp;
B_JQJStatus</label>
			<label kind="synchronisation" x="-1300" y="-595">ctrl5!</label>
			<nail x="-1334" y="-603"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id34"/>
			<target ref="id27"/>
			<label kind="guard" x="-1309" y="-688">!A_FJStatus&amp;&amp;
!B_AuxRecv</label>
			<label kind="synchronisation" x="-1215" y="-671">Reset6!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id28"/>
			<target ref="id49"/>
			<label kind="guard" x="-637" y="-544">ASucc==2</label>
			<label kind="synchronisation" x="-646" y="-527">ctrl1!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id29"/>
			<target ref="id49"/>
			<label kind="guard" x="-875" y="-518">BSucc==2</label>
			<label kind="synchronisation" x="-867" y="-493">ctrl1!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id48"/>
			<target ref="id30"/>
			<label kind="guard" x="-1062" y="-425">!A_FJStatus&amp;&amp;
BSucc==0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id30"/>
			<target ref="id29"/>
			<label kind="synchronisation" x="-909" y="-425">Reset6!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id38"/>
			<target ref="id30"/>
			<label kind="guard" x="-1003" y="-340">!A_FJStatus&amp;&amp;
BSucc==0</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id41"/>
			<label kind="guard" x="-595" y="-408">A_FJStatus&amp;&amp;
BSucc==0</label>
			<label kind="synchronisation" x="-595" y="-374">Reset6!</label>
			<nail x="-603" y="-348"/>
			<nail x="-603" y="-416"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id49"/>
			<target ref="id28"/>
			<label kind="guard" x="-595" y="-510">ASucc==0</label>
			<label kind="synchronisation" x="-646" y="-510">Reset7!</label>
			<nail x="-510" y="-493"/>
			<nail x="-510" y="-569"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id38"/>
			<target ref="id39"/>
			<label kind="guard" x="-1241" y="-340">A_FJStatus&amp;&amp;
BSucc==0</label>
			<label kind="synchronisation" x="-1241" y="-306">Reset6!</label>
			<nail x="-1241" y="-348"/>
			<nail x="-1241" y="-280"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id40"/>
			<target ref="id28"/>
			<label kind="guard" x="-1241" y="-195">ASucc==0</label>
			<label kind="synchronisation" x="-1232" y="-229">Reset7!</label>
			<nail x="-1275" y="-204"/>
			<nail x="-1275" y="-569"/>
		</transition>
		<transition>
			<source ref="id33"/>
			<target ref="id31"/>
			<label kind="guard" x="-790" y="-731">B_FJStatus&amp;&amp;
!A_AuxRecv</label>
			<label kind="synchronisation" x="-680" y="-722">Reset7!</label>
		</transition>
		<transition>
			<source ref="id34"/>
			<target ref="id32"/>
			<label kind="guard" x="-1215" y="-731">A_FJStatus&amp;&amp;
!B_AuxRecv</label>
			<label kind="synchronisation" x="-1198" y="-697">Reset6!</label>
		</transition>
		<transition>
			<source ref="id31"/>
			<target ref="id49"/>
			<label kind="guard" x="-807" y="-629">A_JQJStatus&amp;&amp;
B_JQJStatus</label>
			<label kind="synchronisation" x="-799" y="-654">ctrl1!</label>
		</transition>
		<transition>
			<source ref="id35"/>
			<target ref="id33"/>
			<label kind="synchronisation" x="-918" y="-739">B_AuxObserv?</label>
			<nail x="-714" y="-748"/>
		</transition>
		<transition>
			<source ref="id32"/>
			<target ref="id35"/>
			<label kind="guard" x="-1105" y="-731">A_JQJStatus&amp;&amp;
A_JQJStatus</label>
			<label kind="synchronisation" x="-1079" y="-748">ctrl6!</label>
		</transition>
		<transition>
			<source ref="id36"/>
			<target ref="id34"/>
			<label kind="synchronisation" x="-1113" y="-646">A_AuxObserv?</label>
		</transition>
		<transition>
			<source ref="id37"/>
			<target ref="id36"/>
			<label kind="guard" x="-1113" y="-544">A_JQJStatus&amp;&amp;
B_JQJStatus&amp;&amp;
BSucc==2</label>
			<label kind="synchronisation" x="-1113" y="-476">ctrl5!</label>
		</transition>
		<transition>
			<source ref="id38"/>
			<target ref="id37"/>
			<label kind="guard" x="-1113" y="-382">BSucc==1</label>
			<label kind="synchronisation" x="-1113" y="-399">Reset5!</label>
		</transition>
		<transition>
			<source ref="id39"/>
			<target ref="id38"/>
			<label kind="guard" x="-1113" y="-331">B_JQJStatus
&amp;&amp;ASucc==2</label>
			<label kind="synchronisation" x="-1164" y="-323">ctrl2!</label>
		</transition>
		<transition>
			<source ref="id40"/>
			<target ref="id39"/>
			<label kind="guard" x="-1113" y="-238">ASucc==1</label>
			<label kind="synchronisation" x="-1113" y="-255">Reset4!</label>
		</transition>
		<transition>
			<source ref="id41"/>
			<target ref="id48"/>
			<label kind="guard" x="-688" y="-399">B_JQJStatus
&amp;&amp;ASucc==2</label>
			<label kind="synchronisation" x="-739" y="-391">ctrl2!</label>
		</transition>
		<transition>
			<source ref="id42"/>
			<target ref="id40"/>
			<label kind="guard" x="-1113" y="-178">B_JQJStatus
&amp;&amp;ASucc==2</label>
			<label kind="synchronisation" x="-1164" y="-161">ctrl1!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id43"/>
			<target ref="id46"/>
			<label kind="guard" x="-790" y="-110">A_JQJStatus
&amp;&amp;ASucc==2</label>
			<label kind="synchronisation" x="-765" y="-127">ctrl4!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id44"/>
			<target ref="id47"/>
			<label kind="guard" x="-790" y="-263">A_JQJStatus
&amp;&amp;BSucc==2</label>
			<label kind="synchronisation" x="-697" y="-246">ctrl3!</label>
		</transition>
		<transition>
			<source ref="id45"/>
			<target ref="id40"/>
			<label kind="guard" x="-1037" y="-246">A_JQJStatus&amp;&amp;
B_JQJStatus</label>
			<label kind="synchronisation" x="-1028" y="-204">ctrl1!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id46"/>
			<target ref="id42"/>
			<label kind="guard" x="-1096" y="-144">ASucc==0</label>
			<label kind="synchronisation" x="-1096" y="-127">Reset3!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id47"/>
			<target ref="id43"/>
			<label kind="guard" x="-765" y="-170">ASucc==0</label>
			<label kind="synchronisation" x="-748" y="-187">Reset2!</label>
		</transition>
		<transition>
			<source ref="id48"/>
			<target ref="id44"/>
			<label kind="guard" x="-773" y="-314">BSucc==1</label>
			<label kind="synchronisation" x="-748" y="-331">Reset5!</label>
		</transition>
		<transition>
			<source ref="id49"/>
			<target ref="id41"/>
			<label kind="guard" x="-765" y="-467">ASucc==1</label>
			<label kind="synchronisation" x="-748" y="-450">Reset4!</label>
		</transition>
	</template>
	<template>
		<name>ATCC</name>
		<location id="id50" x="-3060" y="-280">
			<name x="-3136" y="-272">ChangeSucc</name>
			<committed/>
		</location>
		<location id="id51" x="-3476" y="-357">
			<name x="-3510" y="-340">AuxDepartConf</name>
		</location>
		<location id="id52" x="-3476" y="-450">
			<name x="-3570" y="-442">AuxRecvConf</name>
		</location>
		<location id="id53" x="-3476" y="-501">
			<name x="-3468" y="-527">Failed</name>
			<committed/>
		</location>
		<location id="id54" x="-3476" y="-637">
			<name x="-3468" y="-629">Success</name>
			<committed/>
		</location>
		<location id="id55" x="-3060" y="-688">
			<name x="-3153" y="-697">DepartFailed</name>
			<committed/>
		</location>
		<location id="id56" x="-3876" y="-569">
			<name x="-3893" y="-603">DepartOver</name>
			<committed/>
		</location>
		<location id="id57" x="-3723" y="-195">
			<name x="-3706" y="-195">RecvFailed</name>
			<urgent/>
		</location>
		<location id="id58" x="-3476" y="-569">
			<name x="-3451" y="-578">Check</name>
		</location>
		<location id="id59" x="-3340" y="-280">
			<name x="-3416" y="-272">Departure</name>
		</location>
		<location id="id60" x="-3060" y="-450">
			<name x="-3153" y="-442">ChangeDepart</name>
		</location>
		<location id="id61" x="-3230" y="-569">
			<name x="-3272" y="-578">Wait</name>
		</location>
		<location id="id62" x="-3476" y="-688">
			<name x="-3459" y="-697">RecvConf</name>
		</location>
		<location id="id63" x="-3723" y="-569">
			<name x="-3765" y="-561">Receive</name>
		</location>
		<location id="id64" x="-3723" y="-357">
			<name x="-3765" y="-391">Drive</name>
			<committed/>
		</location>
		<location id="id65" x="-3876" y="-357">
			<name x="-3868" y="-383">ChangeRecv</name>
		</location>
		<location id="id66" x="-3476" y="-280">
			<name x="-3570" y="-289">DepartConf</name>
		</location>
		<init ref="id63"/>
		<transition color="#ff0000">
			<source ref="id55"/>
			<target ref="id63"/>
			<label kind="guard" x="-3859" y="-705">A_AuxHdlReq</label>
			<label kind="assignment" x="-3901" y="-688">A_AuxHdlReq:=0,
A_AuxChgDirReq:=0</label>
			<nail x="-3034" y="-722"/>
			<nail x="-3060" y="-756"/>
			<nail x="-3706" y="-756"/>
			<nail x="-3765" y="-705"/>
			<nail x="-3765" y="-603"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id58"/>
			<target ref="id53"/>
			<label kind="guard" x="-3400" y="-552">ACBI_Lock&amp;&amp;
B_AuxChgDirReq</label>
			<nail x="-3408" y="-552"/>
			<nail x="-3408" y="-501"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id58"/>
			<target ref="id54"/>
			<label kind="guard" x="-3400" y="-629">!ACBI_Lock&amp;&amp;
B_AuxChgDirReq</label>
			<nail x="-3408" y="-595"/>
			<nail x="-3408" y="-637"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id65"/>
			<target ref="id57"/>
			<label kind="guard" x="-3833" y="-306">!A_AuxRecv&amp;&amp;
!A_JQJStatus</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id56"/>
			<target ref="id57"/>
			<label kind="guard" x="-3935" y="-178">!A_AuxRecv&amp;&amp;!A_JQJStatus</label>
			<nail x="-3944" y="-569"/>
			<nail x="-3944" y="-161"/>
			<nail x="-3723" y="-161"/>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id59"/>
			<label kind="guard" x="-3247" y="-212">A_AuxHdlReq</label>
			<label kind="assignment" x="-3255" y="-195">A_AuxHdlReq:=0</label>
			<nail x="-3060" y="-195"/>
			<nail x="-3298" y="-195"/>
		</transition>
		<transition>
			<source ref="id50"/>
			<target ref="id59"/>
			<label kind="guard" x="-3272" y="-297">!A_AuxHdlReq</label>
			<label kind="assignment" x="-3272" y="-280">AAllow_CBI:=1</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id52"/>
			<target ref="id55"/>
			<label kind="guard" x="-3417" y="-433">ACBI_Lock||BCBI_Lock</label>
			<nail x="-3476" y="-408"/>
			<nail x="-3017" y="-408"/>
			<nail x="-3017" y="-688"/>
		</transition>
		<transition>
			<source ref="id51"/>
			<target ref="id64"/>
			<label kind="guard" x="-3697" y="-382">!ACBI_Lock&amp;&amp;B_AuxChgDirReq</label>
		</transition>
		<transition>
			<source ref="id59"/>
			<target ref="id51"/>
			<label kind="guard" x="-3434" y="-382">!A_JQJStatus&amp;&amp;A_AuxRecvReq</label>
			<nail x="-3340" y="-357"/>
		</transition>
		<transition>
			<source ref="id52"/>
			<target ref="id61"/>
			<label kind="guard" x="-3417" y="-467">!ACBI_Lock&amp;&amp;!BCBI_Lock</label>
			<label kind="assignment" x="-3451" y="-484">A_AuxChgDirReq:=1</label>
			<nail x="-3434" y="-467"/>
			<nail x="-3315" y="-467"/>
		</transition>
		<transition>
			<source ref="id63"/>
			<target ref="id52"/>
			<label kind="guard" x="-3621" y="-484">A_AuxHdlReq</label>
			<nail x="-3604" y="-450"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id54"/>
			<target ref="id63"/>
			<label kind="synchronisation" x="-3553" y="-637">AAllow!</label>
			<nail x="-3570" y="-637"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id53"/>
			<target ref="id63"/>
			<label kind="synchronisation" x="-3553" y="-518">AFailed!</label>
			<nail x="-3570" y="-501"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id55"/>
			<target ref="id63"/>
			<label kind="guard" x="-3697" y="-722">!A_AuxHdlReq</label>
			<label kind="assignment" x="-3595" y="-748">AAllow_CBI:=0,
A_ChgDirReq:=0</label>
			<nail x="-3060" y="-722"/>
			<nail x="-3094" y="-748"/>
			<nail x="-3663" y="-748"/>
			<nail x="-3723" y="-697"/>
		</transition>
		<transition>
			<source ref="id56"/>
			<target ref="id63"/>
			<label kind="synchronisation" x="-3825" y="-586">AAllow!</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id57"/>
			<target ref="id59"/>
			<label kind="guard" x="-3595" y="-195">A_FJStatus</label>
			<label kind="synchronisation" x="-3595" y="-212">AFailed!</label>
			<label kind="assignment" x="-3595" y="-178">AFJDrive:=1</label>
			<nail x="-3383" y="-195"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id58"/>
			<target ref="id54"/>
			<label kind="guard" x="-3561" y="-612">A_JQJStatus</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id58"/>
			<target ref="id53"/>
			<label kind="guard" x="-3570" y="-544">!A_JQJStatus</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id63"/>
			<target ref="id58"/>
			<label kind="guard" x="-3638" y="-586">B_ChgDirReq||
B_AuxChgDirReq</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id61"/>
			<target ref="id55"/>
			<label kind="synchronisation" x="-3204" y="-646">BFailed?</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id60"/>
			<target ref="id55"/>
			<label kind="synchronisation" x="-3153" y="-595">A_FJTimeOut?</label>
			<label kind="assignment" x="-3145" y="-578">AFJDrive:=0</label>
		</transition>
		<transition>
			<source ref="id60"/>
			<target ref="id50"/>
			<label kind="synchronisation" x="-3137" y="-399">A_FJDown?</label>
		</transition>
		<transition>
			<source ref="id61"/>
			<target ref="id60"/>
			<label kind="synchronisation" x="-3221" y="-535">BAllow?</label>
			<label kind="assignment" x="-3238" y="-518">AFJDrive:=1,
A_ChgDirReq:=0,
A_AuxChgDirReq:=0</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id62"/>
			<target ref="id55"/>
			<label kind="guard" x="-3391" y="-739">!A_JQJStatus</label>
			<nail x="-3442" y="-722"/>
			<nail x="-3103" y="-722"/>
		</transition>
		<transition>
			<source ref="id62"/>
			<target ref="id61"/>
			<label kind="guard" x="-3408" y="-680">A_JQJStatus</label>
			<label kind="assignment" x="-3424" y="-663">A_ChgDirReq:=1</label>
			<nail x="-3442" y="-663"/>
			<nail x="-3315" y="-663"/>
		</transition>
		<transition>
			<source ref="id63"/>
			<target ref="id62"/>
			<label kind="synchronisation" x="-3612" y="-688">ACBI_DepartReq?</label>
			<nail x="-3612" y="-688"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id64"/>
			<target ref="id57"/>
			<label kind="guard" x="-3723" y="-280">!A_AuxRecv&amp;&amp;
!A_JQJStatus</label>
		</transition>
		<transition color="#ff0000">
			<source ref="id65"/>
			<target ref="id57"/>
			<label kind="synchronisation" x="-3867" y="-212">A_FJTimeOut?</label>
			<nail x="-3876" y="-195"/>
		</transition>
		<transition>
			<source ref="id64"/>
			<target ref="id65"/>
			<label kind="assignment" x="-3816" y="-357">AFJClk:=0,
AFJDrive:=0</label>
		</transition>
		<transition>
			<source ref="id66"/>
			<target ref="id64"/>
			<label kind="guard" x="-3646" y="-306">A_JQJStatus</label>
			<nail x="-3476" y="-306"/>
			<nail x="-3612" y="-306"/>
		</transition>
		<transition color="#ff0000">
			<source ref="id66"/>
			<target ref="id57"/>
			<label kind="guard" x="-3595" y="-255">!A_JQJStatus</label>
			<nail x="-3476" y="-255"/>
			<nail x="-3612" y="-255"/>
		</transition>
		<transition>
			<source ref="id65"/>
			<target ref="id56"/>
			<label kind="synchronisation" x="-3867" y="-476">A_FJUp?</label>
		</transition>
		<transition>
			<source ref="id59"/>
			<target ref="id66"/>
			<label kind="guard" x="-3442" y="-297">B_ChgDirReq</label>
		</transition>
	</template>
	<template>
		<name>BTCC</name>
		<location id="id67" x="-3502" y="-3349">
			<name x="-3544" y="-3383">AuxDepartConf</name>
		</location>
		<location id="id68" x="-2941" y="-3468">
			<name x="-2951" y="-3502">ChangeSucc</name>
			<committed/>
		</location>
		<location id="id69" x="-3502" y="-3468">
			<name x="-3476" y="-3459">AuxRecvConf</name>
		</location>
		<location id="id70" x="-3502" y="-3672">
			<name x="-3485" y="-3680">Success</name>
			<committed/>
		</location>
		<location id="id71" x="-3502" y="-3536">
			<name x="-3476" y="-3544">Failed</name>
			<committed/>
		</location>
		<location id="id72" x="-3162" y="-3740">
			<name x="-3264" y="-3748">DepartFailed</name>
			<committed/>
		</location>
		<location id="id73" x="-3748" y="-3179">
			<name x="-3739" y="-3170">RecvFailed</name>
			<urgent/>
		</location>
		<location id="id74" x="-3918" y="-3604">
			<name x="-3952" y="-3638">DepartOver</name>
			<committed/>
		</location>
		<location id="id75" x="-3502" y="-3604">
			<name x="-3485" y="-3612">Check</name>
		</location>
		<location id="id76" x="-3748" y="-3349">
			<name x="-3756" y="-3383">Drive</name>
			<committed/>
		</location>
		<location id="id77" x="-3748" y="-3604">
			<name x="-3782" y="-3587">Receive</name>
		</location>
		<location id="id78" x="-3918" y="-3349">
			<name x="-4020" y="-3357">ChangeRecv</name>
		</location>
		<location id="id79" x="-3502" y="-3264">
			<name x="-3485" y="-3255">DepartConf</name>
		</location>
		<location id="id80" x="-3349" y="-3264">
			<name x="-3417" y="-3238">Departure</name>
		</location>
		<location id="id81" x="-3162" y="-3468">
			<name x="-3204" y="-3451">ChangeDepart</name>
		</location>
		<location id="id82" x="-3272" y="-3612">
			<name x="-3255" y="-3620">Wait</name>
		</location>
		<location id="id83" x="-3502" y="-3740">
			<name x="-3485" y="-3748">RecvConf</name>
		</location>
		<init ref="id80"/>
		<transition>
			<source ref="id72"/>
			<target ref="id77"/>
			<label kind="guard" x="-3527" y="-3791">B_AuxHdlReq</label>
			<label kind="assignment" x="-3654" y="-3791">B_AuxHdlReq:=0,
B_AuxChgDirReq:=0</label>
			<nail x="-3111" y="-3765"/>
			<nail x="-3111" y="-3791"/>
			<nail x="-3672" y="-3791"/>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id71"/>
			<label kind="guard" x="-3459" y="-3587">BCBI_Lock&amp;&amp;
A_AuxChgDirReq</label>
			<nail x="-3468" y="-3587"/>
			<nail x="-3468" y="-3553"/>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id70"/>
			<label kind="guard" x="-3459" y="-3655">!BCBI_Lock&amp;&amp;
A_AuxChgDirReq</label>
			<nail x="-3468" y="-3621"/>
			<nail x="-3468" y="-3646"/>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id80"/>
			<label kind="guard" x="-3145" y="-3204">B_AuxHdlReq</label>
			<label kind="assignment" x="-3144" y="-3179">B_AuxHdlReq:=0</label>
			<nail x="-2890" y="-3468"/>
			<nail x="-2890" y="-3179"/>
			<nail x="-3298" y="-3179"/>
		</transition>
		<transition>
			<source ref="id69"/>
			<target ref="id82"/>
			<label kind="guard" x="-3485" y="-3493">!ACBI_Lock&amp;&amp;!BCBI_Lock</label>
			<label kind="assignment" x="-3493" y="-3519">B_AuxChgDirReq:=1</label>
			<nail x="-3468" y="-3502"/>
			<nail x="-3340" y="-3502"/>
		</transition>
		<transition>
			<source ref="id74"/>
			<target ref="id73"/>
			<label kind="guard" x="-3935" y="-3145">!B_AuxRecv&amp;&amp;!B_JQJStatus</label>
			<label kind="assignment" x="-4020" y="-3145">BFJDrive:=1</label>
			<nail x="-4062" y="-3604"/>
			<nail x="-4062" y="-3128"/>
			<nail x="-3748" y="-3128"/>
		</transition>
		<transition>
			<source ref="id79"/>
			<target ref="id73"/>
			<label kind="guard" x="-3629" y="-3230">!B_JQJStatus</label>
			<nail x="-3502" y="-3230"/>
			<nail x="-3638" y="-3230"/>
		</transition>
		<transition>
			<source ref="id67"/>
			<target ref="id76"/>
			<label kind="guard" x="-3723" y="-3366">!BCBI_Lock&amp;&amp;A_AuxChgDirReq</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id67"/>
			<label kind="guard" x="-3459" y="-3366">!B_JQJStatus&amp;&amp;B_AuxRecvReq</label>
			<nail x="-3349" y="-3349"/>
		</transition>
		<transition>
			<source ref="id68"/>
			<target ref="id80"/>
			<label kind="guard" x="-3085" y="-3281">!B_AuxHdlReq</label>
			<label kind="assignment" x="-3085" y="-3264">BAllow_CBI:=1</label>
			<nail x="-2941" y="-3264"/>
		</transition>
		<transition>
			<source ref="id69"/>
			<target ref="id72"/>
			<label kind="guard" x="-3493" y="-3425">ACBI_Lock||BCBI_Lock</label>
			<nail x="-3502" y="-3400"/>
			<nail x="-3043" y="-3400"/>
			<nail x="-3043" y="-3663"/>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id69"/>
			<label kind="guard" x="-3714" y="-3468">B_AuxHdlReq</label>
			<nail x="-3638" y="-3468"/>
		</transition>
		<transition>
			<source ref="id70"/>
			<target ref="id77"/>
			<label kind="synchronisation" x="-3587" y="-3689">BAllow!</label>
			<nail x="-3604" y="-3672"/>
		</transition>
		<transition>
			<source ref="id71"/>
			<target ref="id77"/>
			<label kind="synchronisation" x="-3587" y="-3536">BFailed!</label>
			<nail x="-3604" y="-3536"/>
		</transition>
		<transition>
			<source ref="id72"/>
			<target ref="id77"/>
			<label kind="guard" x="-3842" y="-3765">!B_AuxHdlReq</label>
			<label kind="assignment" x="-3859" y="-3731">BAllow_CBI:=0,
B_ChgDirReq:=0</label>
			<nail x="-3060" y="-3740"/>
			<nail x="-3060" y="-3808"/>
			<nail x="-3748" y="-3808"/>
		</transition>
		<transition>
			<source ref="id73"/>
			<target ref="id80"/>
			<label kind="guard" x="-3527" y="-3204">B_FJStatus</label>
			<label kind="synchronisation" x="-3442" y="-3204">BFailed!</label>
			<nail x="-3400" y="-3179"/>
		</transition>
		<transition>
			<source ref="id74"/>
			<target ref="id77"/>
			<label kind="synchronisation" x="-3867" y="-3621">BAllow!</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id71"/>
			<label kind="guard" x="-3595" y="-3587">!B_JQJStatus</label>
		</transition>
		<transition>
			<source ref="id75"/>
			<target ref="id70"/>
			<label kind="guard" x="-3587" y="-3646">B_JQJStatus</label>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id75"/>
			<label kind="guard" x="-3655" y="-3629">A_ChgDirReq|
A_AuxChgDirReq</label>
		</transition>
		<transition>
			<source ref="id78"/>
			<target ref="id73"/>
			<label kind="guard" x="-3893" y="-3255">!B_AuxRecv&amp;&amp;
!B_JQJStatus</label>
			<label kind="assignment" x="-3884" y="-3272">BFJDrive:=1</label>
		</transition>
		<transition>
			<source ref="id76"/>
			<target ref="id73"/>
			<label kind="guard" x="-3740" y="-3289">!B_AuxRecv&amp;&amp;
!B_JQJStatus</label>
		</transition>
		<transition>
			<source ref="id78"/>
			<target ref="id73"/>
			<label kind="synchronisation" x="-3909" y="-3196">B_FJTimeOut?</label>
			<label kind="assignment" x="-3900" y="-3179">BFJDrive:=1</label>
			<nail x="-3918" y="-3179"/>
		</transition>
		<transition>
			<source ref="id76"/>
			<target ref="id78"/>
			<label kind="assignment" x="-3858" y="-3349">BFJClk:=0,
BFJDrive:=0</label>
		</transition>
		<transition>
			<source ref="id79"/>
			<target ref="id76"/>
			<label kind="guard" x="-3570" y="-3315">B_JQJStatus</label>
			<nail x="-3502" y="-3298"/>
			<nail x="-3638" y="-3298"/>
		</transition>
		<transition>
			<source ref="id78"/>
			<target ref="id74"/>
			<label kind="synchronisation" x="-3909" y="-3408">B_FJUp?</label>
		</transition>
		<transition>
			<source ref="id80"/>
			<target ref="id79"/>
			<label kind="guard" x="-3468" y="-3289">A_ChgDirReq</label>
		</transition>
		<transition>
			<source ref="id82"/>
			<target ref="id72"/>
			<label kind="synchronisation" x="-3272" y="-3680">AFailed?</label>
		</transition>
		<transition>
			<source ref="id81"/>
			<target ref="id72"/>
			<label kind="synchronisation" x="-3153" y="-3604">B_FJTimeOut?</label>
			<label kind="assignment" x="-3153" y="-3587">BFJDrive:=0</label>
		</transition>
		<transition>
			<source ref="id81"/>
			<target ref="id68"/>
			<label kind="synchronisation" x="-3119" y="-3485">B_FJDown?</label>
		</transition>
		<transition>
			<source ref="id82"/>
			<target ref="id81"/>
			<label kind="synchronisation" x="-3281" y="-3561">AAllow?</label>
			<label kind="assignment" x="-3315" y="-3544">BFJDrive:=1,
B_ChgDirReq:=0,
B_AuxChgDirReq:=0</label>
		</transition>
		<transition>
			<source ref="id83"/>
			<target ref="id72"/>
			<label kind="guard" x="-3383" y="-3774">!B_JQJStatus</label>
			<nail x="-3476" y="-3774"/>
			<nail x="-3196" y="-3774"/>
		</transition>
		<transition>
			<source ref="id83"/>
			<target ref="id82"/>
			<label kind="guard" x="-3434" y="-3723">B_JQJStatus</label>
			<label kind="assignment" x="-3451" y="-3706">B_ChgDirReq:=1</label>
			<nail x="-3468" y="-3706"/>
			<nail x="-3340" y="-3706"/>
		</transition>
		<transition>
			<source ref="id77"/>
			<target ref="id83"/>
			<label kind="synchronisation" x="-3629" y="-3740">BCBI_DepartReq?</label>
			<nail x="-3638" y="-3740"/>
		</transition>
	</template>
	<template>
		<name>AFJ</name>
		<location id="id84" x="-331" y="8">
			<name x="-374" y="-25">ConvertToUp</name>
		</location>
		<location id="id85" x="-331" y="-153">
			<name x="-382" y="-136">ConvertToDown</name>
		</location>
		<location id="id86" x="-170" y="-68">
			<name x="-220" y="-76">Down</name>
		</location>
		<location id="id87" x="-492" y="-68">
			<name x="-475" y="-76">Up</name>
		</location>
		<init ref="id87"/>
		<transition>
			<source ref="id85"/>
			<target ref="id87"/>
			<label kind="guard" x="-561" y="-238">AFJClk&gt;TA0</label>
			<label kind="synchronisation" x="-569" y="-221">A_FJTimeOut!</label>
			<nail x="-331" y="-221"/>
			<nail x="-586" y="-221"/>
			<nail x="-586" y="-68"/>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id86"/>
			<label kind="guard" x="-263" y="59">AFJClk&gt;TA0</label>
			<label kind="synchronisation" x="-271" y="76">A_FJTimeOut!</label>
			<nail x="-331" y="76"/>
			<nail x="-76" y="76"/>
			<nail x="-76" y="-68"/>
		</transition>
		<transition>
			<source ref="id84"/>
			<target ref="id87"/>
			<label kind="guard" x="-475" y="-9">AFJClk&lt;=TA0</label>
			<label kind="synchronisation" x="-475" y="8">A_FJUp!</label>
			<label kind="assignment" x="-475" y="25">A_FJStatus:=0,
AFJClk:=0</label>
			<nail x="-492" y="8"/>
		</transition>
		<transition>
			<source ref="id85"/>
			<target ref="id86"/>
			<label kind="guard" x="-288" y="-153">AFJClk&lt;=TA0</label>
			<label kind="synchronisation" x="-280" y="-178">A_FJDown!</label>
			<label kind="assignment" x="-263" y="-136">A_FJStatus:=1,
AFJClk:=0</label>
			<nail x="-170" y="-153"/>
		</transition>
		<transition>
			<source ref="id86"/>
			<target ref="id84"/>
			<label kind="guard" x="-254" y="-9">!AFJDrive</label>
			<label kind="assignment" x="-263" y="8">AFJClk:=0</label>
			<nail x="-170" y="8"/>
		</transition>
		<transition>
			<source ref="id87"/>
			<target ref="id85"/>
			<label kind="guard" x="-458" y="-170">AFJDrive</label>
			<label kind="assignment" x="-458" y="-144">AFJClk:=0</label>
			<nail x="-492" y="-153"/>
		</transition>
	</template>
	<template>
		<name>BFJ</name>
		<location id="id88" x="0" y="119">
			<name x="-25" y="85">ConvertToUp</name>
		</location>
		<location id="id89" x="0" y="-93">
			<name x="-68" y="-76">ConvertToDown</name>
		</location>
		<location id="id90" x="119" y="0">
			<name x="85" y="-8">Up</name>
		</location>
		<location id="id91" x="-102" y="0">
			<name x="-85" y="-8">Down</name>
		</location>
		<init ref="id91"/>
		<transition>
			<source ref="id89"/>
			<target ref="id91"/>
			<label kind="guard" x="-187" y="-153">BFJClk&gt;TB0</label>
			<label kind="synchronisation" x="-187" y="-136">B_FJTimeOut!</label>
			<nail x="0" y="-136"/>
			<nail x="-204" y="-136"/>
			<nail x="-204" y="0"/>
		</transition>
		<transition>
			<source ref="id88"/>
			<target ref="id90"/>
			<label kind="guard" x="25" y="170">BFJClk&gt;TB0</label>
			<label kind="synchronisation" x="18" y="153">B_FJTimeOut!</label>
			<nail x="0" y="170"/>
			<nail x="204" y="170"/>
			<nail x="204" y="0"/>
		</transition>
		<transition>
			<source ref="id88"/>
			<target ref="id91"/>
			<label kind="guard" x="-102" y="102">BFJClk&lt;=TB0</label>
			<label kind="synchronisation" x="-102" y="119">B_FJDown!</label>
			<label kind="assignment" x="-102" y="136">B_FJStatus:=1,
BFJClk:=0</label>
			<nail x="-102" y="119"/>
		</transition>
		<transition>
			<source ref="id89"/>
			<target ref="id90"/>
			<label kind="guard" x="25" y="-110">BFJClk&lt;=TB0</label>
			<label kind="synchronisation" x="34" y="-93">B_FJUp!</label>
			<label kind="assignment" x="34" y="-76">B_FJStatus:=0,
BFJClk:=0</label>
			<nail x="119" y="-93"/>
		</transition>
		<transition>
			<source ref="id90"/>
			<target ref="id88"/>
			<label kind="guard" x="51" y="119">BFJDrive</label>
			<label kind="assignment" x="51" y="102">BFJClk:=0</label>
			<nail x="119" y="119"/>
		</transition>
		<transition>
			<source ref="id91"/>
			<target ref="id89"/>
			<label kind="guard" x="-93" y="-110">!BFJDrive</label>
			<label kind="assignment" x="-93" y="-93">BFJClk:=0</label>
			<nail x="-102" y="-93"/>
		</transition>
	</template>
	<template>
		<name>AJQJ</name>
		<location id="id92" x="170" y="0">
			<name x="160" y="-34">Up</name>
		</location>
		<location id="id93" x="-102" y="0">
			<name x="-119" y="-34">Down</name>
		</location>
		<init ref="id93"/>
		<transition>
			<source ref="id92"/>
			<target ref="id93"/>
			<label kind="guard" x="-85" y="34">!ASec_Clr||BCBI_Lock||!BSec_Clr</label>
			<label kind="assignment" x="-8" y="8">A_JQJStatus:=false</label>
			<nail x="119" y="25"/>
			<nail x="-51" y="25"/>
		</transition>
		<transition>
			<source ref="id93"/>
			<target ref="id92"/>
			<label kind="guard" x="-93" y="-42">ASec_Clr&amp;&amp;!BCBI_Lock&amp;&amp;BSec_Clr</label>
			<label kind="assignment" x="-8" y="-17">A_JQJStatus:=true</label>
			<nail x="-51" y="-17"/>
			<nail x="119" y="-17"/>
		</transition>
	</template>
	<template>
		<name>BJQJ</name>
		<location id="id94" x="170" y="0">
			<name x="160" y="-34">Up</name>
		</location>
		<location id="id95" x="-161" y="0">
			<name x="-171" y="-34">Down</name>
		</location>
		<init ref="id95"/>
		<transition>
			<source ref="id94"/>
			<target ref="id95"/>
			<label kind="guard" x="-93" y="34">!BSec_Clr||ACBI_Lock||!ASec_Clr</label>
			<label kind="assignment" x="-51" y="8">B_JQJStatus:=false</label>
			<nail x="102" y="34"/>
			<nail x="-85" y="34"/>
		</transition>
		<transition>
			<source ref="id95"/>
			<target ref="id94"/>
			<label kind="guard" x="-136" y="-59">BSec_Clr&amp;&amp;!ACBI_Lock&amp;&amp;ASec_Clr</label>
			<label kind="assignment" x="-51" y="-25">B_JQJStatus:=true</label>
			<nail x="-85" y="-34"/>
			<nail x="102" y="-34"/>
		</transition>
	</template>
	<system>// Place template instantiations here.
//Process = Template();
// List one or more processes to be composed into a system.
system ACBI,BCBI,
ATCC,BTCC,
AJQJ,BJQJ,//
M_CTC,M_EVS,//,
AFJ,BFJ;
    </system>
	<queries>
		<query>
			<formula>E&lt;&gt; ((BTCC.Check) imply (ATCC.Wait))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt;(((ATCC.Receive) and (ACBI.RouteLock)) imply ((BCBI_Lock==true) and (AAllow_CBI==false) and (ASucc==0)))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt; (((ATCC.Receive) and (ACBI.RouteLock)) imply (((ASec_Clr==false) and (BSec_Clr==false))and (AAllow_CBI==false) and (ASucc==0)))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt; (((ATCC.ChangeDepart) imply (BTCC. Receive)) and ((ATCC.ChangeDepart) imply (AFJDrive==0)))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt; ((ATCC.RecvConf) imply (ACBI.RouteLock))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt;  ((ATCC.DepartConf) or (ATCC.Drive) or (ATCC. ChangeRecv) or (ATCC. Receive) or(BTCC.DepartConf) or (BTCC.Drive) or (BTCC. ChangeRecv) or (BTCC. Receive))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt; ((ATCC.RecvConf) or (ATCC.Wait) or (ATCC. ChangeDepart) or (ATCC.Departure) or(BTCC.RecvConf) or (BTCC.Wait) or (BTCC. ChangeDepart) or (BTCC.Departure))
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>E&lt;&gt; (ATCC. DepartFailed imply AFJClk&gt;13)
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>A[] (ATCC.ChangeSucc imply AFJClk&lt;=13)
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>A[] (BTCC.ChangeSucc imply BFJClk&lt;=13)
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>A[] not deadlock
			</formula>
			<comment>
			</comment>
		</query>
	</queries>
</nta>
